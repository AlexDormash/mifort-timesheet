<div class="collapse-wrapper clearfix" ng-repeat="project in projects">

    <h2 ng-class="{'timelog-collapsed': isCollapsed}">
        <a href="" class="collapse-item" ng-class="{'collapsed': isCollapsed}" ng-click="isCollapsed = !isCollapsed">
            {{project.name}}
        </a>
    </h2>

    <div class="timelog-controls">
        <button ng-if="project.currentTimelogIndex" class="previous-period" ng-click="previousPeriod(project)"></button>
        <button ng-if="project.currentTimelogIndex < project.splittedTimelog.length - 1" class="next-period" ng-click="nextPeriod(project)"></button>
    </div>
    {{projects[0].splittedTimelog.length}}

    <div collapse="isCollapsed">
        <table class="table table-bordered timelog">
            <thead>
            <th ng-repeat="timelogKey in timelogKeys">
                {{timelogKey}}
            </th>
            </thead>
            <tbody>
            <tr ng-if="project.currentTimelogIndex >= 0" ng-repeat="log in project.splittedTimelog[project.currentTimelogIndex]"
                ng-class="{'weekend': isWeekend(log.date)}">
                <td ng-class="log.isFirstDayRecord ? 'is-first-day-log' : 'is-not-first-day-log'">
                    <span class="timelog-data">
                        <span ng-if="log.isFirstDayRecord">{{log.date}}</span>

                        <a href="" ng-if="log.isFirstDayRecord" class="add-timelog" ng-click="addRow(log, $index, project)">+</a>
                        <a href="" ng-if="!log.isFirstDayRecord" class="remove-timelog" ng-click="removeRow(log, $index, project)">&#8211;</a>
                    </span>
                </td>

                <td>
                    <select ng-options="assignment as assignment for assignment in timelogAssigments"
                            ng-model="log.role"
                            class="form-control">
                    </select>
                </td>

                <td>
                    <input class="timelog-hours form-control" type="text" ng-model="log.time"/>
                    <span>hours</span>
                </td>

                <td><input class="timelog-comment form-control" type="text" ng-model="log.comment"/></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>


<!--<small>{{project.periods}}</small>-->
<!--<small>{{splittedTimelog.length}}</small>-->
<!--<small>{{timelog}}</small>-->